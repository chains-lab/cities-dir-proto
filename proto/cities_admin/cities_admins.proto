syntax = "proto3";
package cities_admin;

option go_package = "github.com/chains-lab/cities-dir-proto/gen/go/citiesadmin;citiesadmin";

import "google/protobuf/empty.proto";
import "common/userdata/userdata.proto";;
import "common/pagination/pagination.proto";

service CityAdminService {
  rpc CreateCityOwner (CreateCityOwnerRequest) returns (CityAdmin);
  rpc TransferOwnership (TransferOwnershipRequest) returns (CityAdmin);

  rpc CreateAdmin (CreateAdminRequest)     returns (CityAdmin);
  rpc UpdateAdmin (UpdateAdminRequest)     returns (CityAdmin);
  rpc DeleteAdmin (DeleteAdminRequest)     returns (google.protobuf.Empty);
  rpc ResignAdmin (ResignAdminRequest)     returns (google.protobuf.Empty);

  rpc GetAdmin     (GetAdminRequest)        returns (CityAdmin);
  rpc ListAdmins   (ListAdminsRequest)      returns (ListCitiesAdmins);
}

// --------------------
// ---- REQUESTS -----
// --------------------

message CreateCityOwnerRequest {
  optional userdata.UserData initiator = 1;
  string city_id = 2;
  string user_id = 3;
}

message TransferOwnershipRequest {
  optional userdata.UserData initiator = 1;
  string city_id        = 2;
  string new_owner_id   = 3;
}

message CreateAdminRequest {
  optional userdata.UserData initiator = 1;
  string city_id = 2;
  string user_id = 3;
  string role    = 4;
}

message UpdateAdminRequest {
  optional userdata.UserData initiator = 1;
  string city_id = 2;
  string user_id = 3;
  string role    = 4;
}

message DeleteAdminRequest {
  optional userdata.UserData initiator = 1;
  string city_id = 2;
  string user_id = 3;
}

message ResignAdminRequest {
  optional userdata.UserData initiator = 1;
  string city_id = 2;
  string user_id = 3;
}

message GetAdminRequest {
  string city_id = 1;
  string user_id = 2;
}

message ListAdminsRequest {
  string city_id = 1;
  pagination.Request pagination = 2;
}

// --------------------
// ---- RESPONSES ----
// --------------------

message CityAdmin {
  string city_id = 1;
  string user_id = 2;
  string role    = 3;
}

message ListCitiesAdmins {
  repeated CityAdmin admins     = 1;
  pagination.Response pagination = 2;
}