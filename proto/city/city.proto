syntax = "proto3";
package city;

option go_package = "github.com/chains-lab/cities-dir-proto/gen/go/city;city";

//import "google/protobuf/empty.proto";
import "common/userdata/userdata.proto";
import "common/pagination/pagination.proto";

service CityService {
  rpc SendFormToCreateCity(SendFormToCreateCityRequest)           returns (City);
  rpc GetFormToCreateCreateCity(GetFormToCreateCreateCityRequest) returns (FormToCreateCity);
  rpc SearchFormToCreateCity(SearchFormToCreateCityRequest)       returns (FormToCreateCity);

  rpc GetCityById(GetCityByIdRequest)           returns (City);

  rpc UpdateCityStatus(UpdateCityStatusRequest) returns (City);
  rpc UpdateCityName(UpdateCityNameRequest)     returns (City);

  rpc SearchCities(SearchCitiesRequest) returns (CitiesList);
}

// REQUESTS

message SendFormToCreateCityRequest {
  userdata.UserData initiator = 1;
  string city_name     = 2;
  string country_id    = 3;
  string contact_email = 4;
  string contact_phone = 5;
  string text          = 6;
}

message GetCityByIdRequest {
  string city_id = 1;
}

message SearchCitiesRequest {
  string name_like  = 1;
  string country_id = 2;
  string status     = 3;
  pagination.Request pagination = 4;
}

message UpdateCityStatusRequest {
  userdata.UserData initiator = 1;
  string city_id = 2;
  string status  = 3;
}

message UpdateCityNameRequest {
  userdata.UserData initiator = 1;
  string city_id = 2;
  string name    = 3;
}

message GetFormToCreateCreateCityRequest{
  string form_id = 1;
}

message SearchFormToCreateCityRequest{
  optional string id = 1;
  optional string status = 2;
  optional string city_name = 3;
  optional string country_id = 4;
  optional string initiator_id = 5;
  oneof sort {
    bool new_first = 6;
    bool oldest_first = 7;
  }
  pagination.Request pag = 8;
}


// RESPONSES

message City {
  string id         = 1;
  string name       = 2;
  string country_id = 3;
  string status     = 4;
}

message CitiesList {
  repeated City cities     = 1;
  pagination.Response pagination = 2;
}

message FormToCreateCity {
  string id = 1;
  string status = 2;
  string city_name = 3;
  string country_id = 4;
  string initiator_id = 5;
  string contact_email = 6;
  string contact_phone = 7;
  string text = 8;
  string create_at = 9;
}

message FormToCreateCityList {
  FormToCreateCity         forms = 1;
  pagination.Response pagination = 2;
}