syntax = "proto3";
package gov;

option go_package = "github.com/chains-lab/cities-dir-proto/gen/go/svc/gov;gov";

import "google/protobuf/empty.proto";
import "common/userdata/userdata.proto";
import "common/pagination/pagination.proto";

service GovService {
  rpc CreateCityGov (CreateCityGovRequest)     returns (CityGov);
  rpc DeleteCityGov (DeleteCityGovRequest)     returns (google.protobuf.Empty);

  rpc RefuseCityGovRight (RefuseCityGovRightRequest)  returns (google.protobuf.Empty);

  rpc TransferAdminRight (TransferAdminRightRequest)   returns (google.protobuf.Empty);

  rpc GetCityGov        (GetCityGovRequest)        returns (CityGov);
  rpc GetListCityGovs   (ListCityGovsRequest)      returns (ListCityGovs);
}

service GovAdminService {
  rpc CreateCityGovAdmin (CreateCityGovAdminRequest) returns (gov.CityGov);
  rpc DeleteCityGovAdmin (DeleteCityGovAdminRequest) returns (google.protobuf.Empty);

  rpc CreateCityGov (CreateCityGovRequest)     returns (gov.CityGov);
}

// REQUESTS

message CreateCityGovAdminRequest {
  string city_id = 1;
  string user_id = 2;
}

message DeleteCityGovAdminRequest {
  string city_id = 1;
}

message CreateCityAdminRequest {
  string city_id = 1;
  string user_id = 2;
}

message CreateCityGovRequest {
  string city_id = 1;
  string user_id = 2;
}

message DeleteCityGovRequest {
  string city_id = 1;
  string user_id = 2;
}

message TransferAdminRightRequest {
  string city_id        = 1;
  string new_owner_id   = 2;
}

message RefuseCityGovRightRequest {
  string city_id = 2;
}

message GetCityGovRequest {
  string city_id = 1;
  string user_id = 2;
}

message ListCityGovsRequest {
  string city_id = 1;
  pagination.Request pagination = 2;
}

// --------------------
// ---- RESPONSES ----
// --------------------

message CityGov {
  string city_id = 1;
  string user_id = 2;
  string role    = 3;
}

message ListCityGovs {
  repeated CityGov government    = 1;
  pagination.Response pagination = 2;
}