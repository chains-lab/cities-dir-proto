syntax = "proto3";
package citiesdir;

option go_package = "github.com/chains-lab/cities-dir-proto/gen/go/svc;svc";

import "google/protobuf/empty.proto";
import "common.proto";

service CityAdminService {
  rpc CreateCityOwner (CreateCityOwnerRequest) returns (CityAdmin);
  rpc TransferOwnership (TransferOwnershipRequest) returns (CityAdmin);

  rpc CreateAdmin (CreateAdminRequest)     returns (CityAdmin);
  rpc UpdateAdmin (UpdateAdminRequest)     returns (CityAdmin);
  rpc DeleteAdmin (DeleteAdminRequest)     returns (google.protobuf.Empty);
  rpc ResignAdmin (ResignAdminRequest)     returns (google.protobuf.Empty);

  rpc GetAdmin     (GetAdminRequest)        returns (CityAdmin);
  rpc ListAdmins   (ListAdminsRequest)      returns (ListCitiesAdmins);
}

// --------------------
// ---- REQUESTS -----
// --------------------

message CreateCityOwnerRequest {
  string city_id = 1;
  string user_id = 2;
}

message TransferOwnershipRequest {
  string city_id        = 1;
  string new_owner_id   = 2;
}

message CreateAdminRequest {
  string city_id = 1;
  string user_id = 2;
  string role    = 3;
}

message UpdateAdminRequest {
  string city_id = 1;
  string user_id = 2;
  string role    = 3;
}

message DeleteAdminRequest {
  string city_id = 1;
  string user_id = 2;
}

message ResignAdminRequest {
  string city_id = 1;
  string user_id = 2;
}

message GetAdminRequest {
  string city_id = 1;
  string user_id = 2;
}

message ListAdminsRequest {
  string city_id = 1;
  PaginationRequest pagination = 2;
}

// --------------------
// ---- RESPONSES ----
// --------------------

message CityAdmin {
  string city_id = 1;
  string user_id = 2;
  string role    = 3;
}

message ListCitiesAdmins {
  repeated CityAdmin admins     = 1;
  PaginationResponse pagination = 2;
}